{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-04-04 12:54:25.505082",
 "custom_format": 1,
 "default_print_language": "en-US",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <style>\r\n    @page {\r\n        margin-top: 2mm;\r\n        margin-bottom: 20mm;\r\n        margin-left: 15mm;\r\n        margin-right: 15mm; /* Ensure there's enough space on the right */\r\n        size: A4;\r\n    }\r\n    .copy-header {\r\n      height: 50mm; \r\n      /*margin-bottom: 20mm;*/\r\n    }\r\n\r\n    body {\r\n        font-size: 12px;\r\n    }\r\n    \r\n    .page-break {\r\n        page-break-after: always;\r\n    }\r\n    \r\n    table {\r\n        width: 99.50%;\r\n        border-collapse: collapse;\r\n        font-size: 12px;\r\n        color: #000;\r\n    }\r\n    \r\n    th, td {\r\n        border: 1px solid black;\r\n        padding: 8px;\r\n        text-align: left;\r\n        box-sizing: border-box;\r\n    }\r\n    \r\n    .header-table {\r\n        width: 99.50%;\r\n        border: none;\r\n    }\r\n    \r\n    .header-table td {\r\n        padding: 5px;\r\n    }\r\n    \r\n    .invoice-title {\r\n        font-size: 15px;\r\n        font-weight: bold;\r\n        text-align: center;\r\n        border-bottom: 1px solid black; \r\n        margin-bottom: 2px;\r\n    }\r\n    \r\n    .bold-text {\r\n        font-weight: bold;\r\n    }\r\n    \r\n    .text-right {\r\n        text-align: right;\r\n    }\r\n    \r\n    .text-center {\r\n        text-align: center;\r\n    }\r\n    \r\n    .text-left {\r\n        text-align: left;\r\n    }\r\n    \r\n    thead { \r\n        display: table-header-group; \r\n    }\r\n    \r\n    tfoot { \r\n        display: table-row-group; \r\n    }\r\n    tr {\r\n        page-break-inside: avoid;\r\n    }\r\n    \r\n    .items-table th {\r\n        text-align: center;\r\n    }\r\n    </style>\r\n</head>\r\n<body>\r\n\r\n<!-- FIRST COPY - ORIGINAL FOR RECIPIENT -->\r\n<div class=\"invoice-copy\">\r\n    \r\n    <table style=\"width: 100%; margin-bottom: 10px; border: hidden !important\">\r\n        <tr>\r\n            <td style=\"text-align: left; border: hidden !important\">\r\n                {% if doc.ewaybill %}\r\n                    <strong>E-Waybill:</strong> {{ doc.ewaybill }}\r\n                {% endif %}\r\n            </td>\r\n            <td style=\"text-align: right; border: hidden !important\">\r\n                <strong>Original for Buyer</strong>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div class=\"copy-header\"></div>\r\n    <!-- Header Section -->\r\n    <table class=\"header-table\">\r\n        <tr>\r\n            <td style=\"width: 35%; line-height: 1.2;\">\r\n                <strong>Bill To:</strong><br>\r\n                <b>{{ doc.customer }}</b><br>\r\n                {% if doc.customer_address %}\r\n                    {% set billing_address = frappe.get_doc(\"Address\", doc.customer_address) %}\r\n                    {{ billing_address.address_line1 }}<br>\r\n                    {% if billing_address.address_line2 %}{{ billing_address.address_line2 }}<br>{% endif %}\r\n                    {{ billing_address.city }}, {{ billing_address.state }} - {{ billing_address.pincode }}<br>\r\n                    GSTIN: {{ billing_address.gstin if billing_address.gstin else 'N/A' }}\r\n                {% endif %}\r\n            </td>\r\n\r\n            <td style=\"width: 35%; line-height: 1.2;\">\r\n                {% if doc.shipping_address_name %}\r\n                    {% set shipping_address = frappe.get_doc(\"Address\", doc.shipping_address_name) %}\r\n                    <strong>Ship To:</strong><br>\r\n                    <b>{{ shipping_address.address_title }}</b><br>\r\n                    {{ shipping_address.address_line1 }}<br>\r\n                    {% if shipping_address.address_line2 %}{{ shipping_address.address_line2 }}<br>{% endif %}\r\n                    {{ shipping_address.city }}, {{ shipping_address.state }} - {{ shipping_address.pincode }}<br>\r\n                    GSTIN: {{ shipping_address.gstin if shipping_address.gstin else 'N/A' }}\r\n                {% else %}\r\n                    <strong>Ship To:</strong><br>\r\n                    N/A\r\n                {% endif %}\r\n            </td>\r\n\r\n\r\n            <td class=\"text-left\" style=\"width: 30%; line-height: 1.2;\">\r\n                <div class=\"invoice-title\">TAX INVOICE</div>\r\n                <strong>Invoice No:</strong> {{ doc.name }}<br>\r\n                <strong>Date:</strong> {{ frappe.utils.formatdate(doc.posting_date, \"dd-mm-yyyy\") }}<br>\r\n                <strong>Vehicle No:</strong> {{ doc.vehicle_no }}<br>\r\n                <strong>Carrier Name:</strong> {{ doc.custom_carrier_name }}<br>\r\n                <strong>Freight Term:</strong> {{ doc.custom_freight_term }}\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Item Table -->\r\n    {% set ns = namespace(total_weight=0, total_value=0) %}\r\n    <table class=\"items-table\" style=\" border-collapse: collapse; border-style: hidden !important; border-bottom: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <thead>\r\n            <tr>\r\n                <th style=\"text-align: center;\">S/N</th>\r\n                <th style=\"text-align: center;\">HSN</th>\r\n                <th style=\"text-align: center;\">Description of Goods</th>\r\n                <th style=\"text-align: center;\">Rate</th>\r\n                <th style=\"text-align: center;\">Qty</th>\r\n                <th style=\"text-align: center;\">Unit</th>\r\n                <th style=\"text-align: center;\">Disc(%)</th>\r\n                <th style=\"text-align: center;\">Unit Price</th>\r\n                <th style=\"text-align: cneter\">Amount</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {% for item in doc.items %}\r\n            <tr>\r\n                <td style=\"text-align: center;\">{{ loop.index }}</td>\r\n                <td style=\"text-align: center;\">{{ item.gst_hsn_code or \" \"}}</td>\r\n                <td style=\"text-align: center;\">{{ item.description }}</td>\r\n                <td style=\"text-align: center;\">{{ item.rate }}</td>\r\n                <td style=\"text-align: center;\">\r\n                    {% set weight = item.custom_weight_in_kg|float %}\r\n                    {% set length = item.custom_length_in_meter|float %}\r\n                    \r\n                    {% set uom = (frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") \r\n                                  or frappe.db.get_value(\"Item\", item.item_code, \"stock_uom\") \r\n                                  or \"N/A\")|upper %}\r\n                \r\n                    {% if uom == \"KG\" %}\r\n                        {% set value = weight %}\r\n                    {% elif uom in [\"METER\", \"MTR\", \"LENGTH\"] %}\r\n                        {% set value = length %}\r\n                    {% elif uom in [\"BOX\", \"BOXES\", \"COIL\", \"COILS\"] %}\r\n                        {% set value = item.qty %}\r\n                    {% else %}\r\n                        {% set value = 0 %}\r\n                    {% endif %}\r\n                \r\n                    {% if value == value|int %}\r\n                        {{ value|int }}\r\n                    {% else %}\r\n                        {{ \"%.3f\"|format(value) }}\r\n                    {% endif %}\r\n                </td>\r\n\r\n                \r\n                <td style=\"text-align: center;\">\r\n                    {% set sales_uom = frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") or item.uom %}\r\n                \r\n                    {% if sales_uom|lower == 'kg' %}\r\n                        Kg(s)\r\n                    {% elif sales_uom|lower == 'box' %}\r\n                        Box(s)\r\n                    {% elif sales_uom|lower == 'meter' %}\r\n                        Meter(s)\r\n                    {% else %}\r\n                        {{ sales_uom }}\r\n                    {% endif %}\r\n                </td>\r\n                <td style=\"text-align: center;\">0.00</td>\r\n                <td style=\"text-align: center;\">{{ item.rate }}</td>\r\n                <td class=\"text-right\" style='width:100px'>{{ \"%.2f\"|format(item.amount) }}</td>\r\n            </tr>\r\n            {% set ns.total_weight = ns.total_weight + (item.custom_weight_in_kg | float(0)) %}\r\n            {% set ns.total_value = ns.total_value + (item.amount | float(0)) %}\r\n            {% endfor %}\r\n    \r\n            <tr>\r\n                <td colspan=\"6\">E&OE.</td>\r\n                <td colspan=\"2\" class=\"text-right bold-text\">Total Amount:</td>\r\n                <td class=\"text-right\"><strong>\u20b9{{ '%.2f'|format(ns.total_value) }}</strong></td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <!-- Summary -->\r\n    <table style=\"border-style: hidden !important; border-left: 1px solid black !important; border-right: 1px solid black !important; border-collapse: collapse;\">\r\n        <tr>\r\n            <!-- Left Section (Invoice Details) -->\r\n            <td style=\"width: 50%; vertical-align: top; padding: 10px; border-right: 1px solid black;\">\r\n                {% if doc.irn %}\r\n                    {% set e_invoice_log = frappe.db.get_value(\"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True) %}\r\n                    {% if e_invoice_log %}\r\n                        {% set invoice_data = json.loads(e_invoice_log.invoice_data) %}\r\n                        {% set date_format = frappe.db.get_single_value(\"System Settings\", 'date_format').replace(\"mm\", \"MM\") %}\r\n            \r\n                        <div style=\"padding-top: 5px; display: flex; align-items: center; justify-content: flex-start; margin-left: 8px;\">\r\n                            <!-- QR Code -->\r\n                            <div style=\"width: 120px; height: 120px; overflow: hidden; display: flex; align-items: center; justify-content: center;\">\r\n                                {{ web_block('e-Invoice QR', values={'e_invoice_qr_text': e_invoice_log.signed_qr_code }) }}\r\n                            </div>\r\n                            <!-- IRN Details -->\r\n                            <div style=\"max-width: 150px; word-wrap: break-word; font-size: 12px; margin-left: 15px;\">\r\n                                <p><b>IRN:</b> <span style=\"word-break: break-word;\">{{ doc.irn }}</span></p>\r\n                                <p><b>Ack No.:</b> {{ invoice_data.get(\"AckNo\") or '' }}</p>\r\n                                <p><b>Ack Date:</b> {{ frappe.utils.format_datetime(invoice_data.get(\"AckDt\"), date_format) if invoice_data.get(\"AckDt\") else '' }}</p>\r\n                            </div>\r\n                        </div>\r\n                    {% endif %}\r\n                {% endif %}\r\n            </td>\r\n\r\n            <!-- Right Section (Tax & Totals) -->\r\n            <td style=\"width: 50%; vertical-align: top; padding: 0px !important;\">\r\n                <table style=\"width: 100%; border-style: hidden !important;\">\r\n                    <tr>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            Amount Before Tax:\r\n                        </td>\r\n                        <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            \u20b9{{ doc.total }}\r\n                        </td>\r\n                    </tr>\r\n\r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"IGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">IGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% elif \"CGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">CGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% elif \"SGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">SGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n\r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"TCS\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                TCS @ {{ tax.rate }}%:\r\n                            </td>\r\n                            <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                \u20b9{{ \"%.2f\"|format(tax.tax_amount) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n                    \r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"Rounded Off - S\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                Round Off:\r\n                            </td>\r\n                            <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                \u20b9{{ \"%.2f\"|format(tax.tax_amount) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n\r\n                    <tr>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                           Rounded Total:\r\n                        </td>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            \u20b9{{ \"%.2f\"|format(doc.outstanding_amount) }}\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    \r\n     <!-- Amount in Words -->\r\n    <table style=\" border-collapse: collapse; border-style: hidden !important; border-top: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <tr>\r\n            <td><strong>IN WORDS: </strong> {{ doc.in_words.lower().replace(\"inr\", \"\").replace(\" and \", \" \").replace(\",\", \"\").replace(\" only\", \" rupees only\").strip() }}</td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Bank Details -->\r\n    <table>\r\n        <tr>\r\n            <td>\r\n                <strong>Bank Details:</strong><br>\r\n                <b>Bank Name:</b> ICICI Bank, \r\n                <b>Branch:</b> Trichy Road, Coimbatore,\r\n                <b>Account Number:</b> 001605021125, \r\n                <b>IFSC Code:</b> ICIC0000016\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Terms and Conditions -->\r\n    <table style=\" border-collapse: collapse; border-style: hidden !important; border-bottom: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <tr>\r\n            <td style=\"width: 70%; vertical-align: top;\">\r\n                <p style=\"font-size: 15px !important; font-weight: bold;\">Terms & Conditions:</p>\r\n                <ol style=\" font-size: 10px !important; margin-top: 5px; padding-left: 2px; list-style-position: inside;\">\r\n                    <li>NO CLAIMS ARE ENTERTAINED UNLESS BROUGHT TO OUR NOTICE WITHIN TWO DAYS ON RECEIPT OF GOODS.</li>\r\n                    <li>GOODS ONCE SOLD WILL NOT BE TAKEN BACK.</li>\r\n                    <li>INTEREST @ 24% WILL BE CHARGED ON OVERDUE PAYMENT.</li>\r\n                    <li>WE ARE NOT RESPONSIBLE FOR BREAKAGE & DAMAGE IN TRANSIT.</li>\r\n                    <li>TRANSIT INSURANCE IF ANY IS TO BE TAKEN BY THE BUYER.</li>\r\n                    <li>ANY DISPUTES ARISING ARE SUBJECT TO COIMBATORE JURISDICTION.</li>\r\n                </ol>\r\n            </td>\r\n            <td style=\"width: 30%; text-align: center; font-size: 10px !important;\">\r\n                <p><strong>For SONALI WIRES LLP</strong></p><br><br><br><br><br><br><br><br><br>\r\n                <p><strong>Authorized Signatory</strong></p>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n\r\n<!-- PAGE BREAK -->\r\n<div class=\"page-break\"></div>\r\n\r\n<!-- SECOND COPY - DUPLICATE FOR TRANSPORTER -->\r\n<div class=\"invoice-copy\">\r\n    \r\n    <table style=\"width: 100%; margin-bottom: 1px; border: hidden !important\">\r\n        <tr>\r\n            <td style=\"text-align: left; border: hidden !important\">\r\n                {% if doc.ewaybill %}\r\n                    <strong>E-Waybill:</strong> {{ doc.ewaybill }}\r\n                {% endif %}\r\n            </td>\r\n            <td style=\"text-align: right; border: hidden !important\">\r\n                <strong>Duplicate for Transporter</strong>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div class=\"copy-header\"></div>\r\n    <!-- Header Section -->\r\n    <table class=\"header-table\">\r\n        <tr>\r\n            <td style=\"width: 35%; line-height: 1.2;\">\r\n                <strong>Bill To:</strong><br>\r\n                <b>{{ doc.customer }}</b><br>\r\n                {% if doc.customer_address %}\r\n                    {% set billing_address = frappe.get_doc(\"Address\", doc.customer_address) %}\r\n                    {{ billing_address.address_line1 }}<br>\r\n                    {% if billing_address.address_line2 %}{{ billing_address.address_line2 }}<br>{% endif %}\r\n                    {{ billing_address.city }}, {{ billing_address.state }} - {{ billing_address.pincode }}<br>\r\n                    GSTIN: {{ billing_address.gstin if billing_address.gstin else 'N/A' }}\r\n                {% endif %}\r\n            </td>\r\n\r\n            <td style=\"width: 35%; line-height: 1.2;\">\r\n                {% if doc.shipping_address_name %}\r\n                    {% set shipping_address = frappe.get_doc(\"Address\", doc.shipping_address_name) %}\r\n                    <strong>Ship To:</strong><br>\r\n                    <b>{{ shipping_address.address_title }}</b><br>\r\n                    {{ shipping_address.address_line1 }}<br>\r\n                    {% if shipping_address.address_line2 %}{{ shipping_address.address_line2 }}<br>{% endif %}\r\n                    {{ shipping_address.city }}, {{ shipping_address.state }} - {{ shipping_address.pincode }}<br>\r\n                    GSTIN: {{ shipping_address.gstin if shipping_address.gstin else 'N/A' }}\r\n                {% else %}\r\n                    <strong>Ship To:</strong><br>\r\n                    N/A\r\n                {% endif %}\r\n            </td>\r\n\r\n            <td class=\"text-left\" style=\"width: 30%; line-height: 1.2;\">\r\n                <div class=\"invoice-title\">TAX INVOICE</div>\r\n                <strong>Invoice No:</strong> {{ doc.name }}<br>\r\n                <strong>Date:</strong> {{ frappe.utils.formatdate(doc.posting_date, \"dd-mm-yyyy\") }}<br>\r\n                <strong>Vehicle No:</strong> {{ doc.vehicle_no }}<br>\r\n                <strong>Carrier Name:</strong> {{ doc.custom_carrier_name }}<br>\r\n                <strong>Freight Term:</strong> {{ doc.custom_freight_term }}\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Item Table -->\r\n    {% set ns = namespace(total_weight=0, total_value=0) %}\r\n    <table class=\"items-table\" style=\" border-collapse: collapse; border-style: hidden !important; border-bottom: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <thead>\r\n            <tr>\r\n                <th style=\"text-align: center;\">S/N</th>\r\n                <th style=\"text-align: center;\">HSN</th>\r\n                <th style=\"text-align: center;\">Description of Goods</th>\r\n                <th style=\"text-align: center;\">Rate</th>\r\n                <th style=\"text-align: center;\">Qty</th>\r\n                <th style=\"text-align: center;\">Unit</th>\r\n                <th style=\"text-align: center;\">Disc(%)</th>\r\n                <th style=\"text-align: center;\">Unit Price</th>\r\n                <th style=\"text-align: center\">Amount</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {% for item in doc.items %}\r\n            <tr>\r\n                <td style=\"text-align: center;\">{{ loop.index }}</td>\r\n                <td style=\"text-align: center;\">{{ item.gst_hsn_code or \" \"}}</td>\r\n                <td style=\"text-align: center;\">{{ item.description }}</td>\r\n                <td style=\"text-align: center;\">{{ item.rate }}</td>\r\n                <td style=\"text-align: center;\">\r\n                    {% set weight = item.custom_weight_in_kg|float %}\r\n                    {% set length = item.custom_length_in_meter|float %}\r\n                    \r\n                    {% set uom = (frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") \r\n                                  or frappe.db.get_value(\"Item\", item.item_code, \"stock_uom\") \r\n                                  or \"N/A\")|upper %}\r\n                \r\n                    {% if uom == \"KG\" %}\r\n                        {% set value = weight %}\r\n                    {% elif uom in [\"METER\", \"MTR\", \"LENGTH\"] %}\r\n                        {% set value = length %}\r\n                    {% elif uom in [\"BOX\", \"BOXES\", \"COIL\", \"COILS\"] %}\r\n                        {% set value = item.qty %}\r\n                    {% else %}\r\n                        {% set value = 0 %}\r\n                    {% endif %}\r\n                \r\n                    {% if value == value|int %}\r\n                        {{ value|int }}\r\n                    {% else %}\r\n                        {{ \"%.3f\"|format(value) }}\r\n                    {% endif %}\r\n                </td>\r\n                \r\n                <td style=\"text-align: center;\">\r\n                    {% set sales_uom = frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") or item.uom %}\r\n                \r\n                    {% if sales_uom|lower == 'kg' %}\r\n                        Kg(s)\r\n                    {% elif sales_uom|lower == 'box' %}\r\n                        Box(s)\r\n                    {% elif sales_uom|lower == 'meter' %}\r\n                        Meter(s)\r\n                    {% else %}\r\n                        {{ sales_uom }}\r\n                    {% endif %}\r\n                </td>\r\n                <td style=\"text-align: center;\">0.00</td>\r\n                <td style=\"text-align: center;\">{{ item.rate }}</td>\r\n                <td class=\"text-right\" style='width:100px'>{{ \"%.2f\"|format(item.amount) }}</td>\r\n            </tr>\r\n            {% set ns.total_weight = ns.total_weight + (item.custom_weight_in_kg | float(0)) %}\r\n            {% set ns.total_value = ns.total_value + (item.amount | float(0)) %}\r\n            {% endfor %}\r\n    \r\n            <tr>\r\n                <td colspan=\"6\">E&OE.</td>\r\n                <td colspan=\"2\" class=\"text-right bold-text\">Total Amount:</td>\r\n                <td class=\"text-right\"><strong>\u20b9{{ '%.2f'|format(ns.total_value) }}</strong></td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <!-- Summary -->\r\n    <table style=\"border-style: hidden !important; border-left: 1px solid black !important; border-right: 1px solid black !important; border-collapse: collapse;\">\r\n        <tr>\r\n            <!-- Left Section (Invoice Details) -->\r\n            <td style=\"width: 50%; vertical-align: top; padding: 10px; border-right: 1px solid black;\">\r\n                {% if doc.irn %}\r\n                    {% set e_invoice_log = frappe.db.get_value(\"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True) %}\r\n                    {% if e_invoice_log %}\r\n                        {% set invoice_data = json.loads(e_invoice_log.invoice_data) %}\r\n                        {% set date_format = frappe.db.get_single_value(\"System Settings\", 'date_format').replace(\"mm\", \"MM\") %}\r\n            \r\n                        <div style=\"padding-top: 5px; display: flex; align-items: center; justify-content: flex-start; margin-left: 8px;\">\r\n                            <!-- QR Code -->\r\n                            <div style=\"width: 120px; height: 120px; overflow: hidden; display: flex; align-items: center; justify-content: center;\">\r\n                                {{ web_block('e-Invoice QR', values={'e_invoice_qr_text': e_invoice_log.signed_qr_code }) }}\r\n                            </div>\r\n                            <!-- IRN Details -->\r\n                            <div style=\"max-width: 150px; word-wrap: break-word; font-size: 12px; margin-left: 15px;\">\r\n                                <p><b>IRN:</b> <span style=\"word-break: break-word;\">{{ doc.irn }}</span></p>\r\n                                <p><b>Ack No.:</b> {{ invoice_data.get(\"AckNo\") or '' }}</p>\r\n                                <p><b>Ack Date:</b> {{ frappe.utils.format_datetime(invoice_data.get(\"AckDt\"), date_format) if invoice_data.get(\"AckDt\") else '' }}</p>\r\n                            </div>\r\n                        </div>\r\n                    {% endif %}\r\n                {% endif %}\r\n            </td>\r\n\r\n            <!-- Right Section (Tax & Totals) -->\r\n            <td style=\"width: 50%; vertical-align: top; padding: 0px !important;\">\r\n                <table style=\"width: 100%; border-style: hidden !important;\">\r\n                    <tr>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            Amount Before Tax:\r\n                        </td>\r\n                        <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            \u20b9{{ doc.total }}\r\n                        </td>\r\n                    </tr>\r\n\r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"IGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">IGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% elif \"CGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">CGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% elif \"SGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">SGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n\r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"TCS\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                TCS @ {{ tax.rate }}%:\r\n                            </td>\r\n                            <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                \u20b9{{ \"%.2f\"|format(tax.tax_amount) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n                    \r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"Rounded Off - S\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                Round Off:\r\n                            </td>\r\n                            <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                \u20b9{{ \"%.2f\"|format(tax.tax_amount) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n\r\n                    <tr>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                           Rounded Total:\r\n                        </td>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            \u20b9{{ \"%.2f\"|format(doc.outstanding_amount) }}\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    \r\n    <!-- Amount in Words -->\r\n    <table style=\" border-collapse: collapse; border-style: hidden !important; border-top: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <tr>\r\n            <td><strong>IN WORDS: </strong> {{ doc.in_words.lower().replace(\"inr\", \"\").replace(\" and \", \" \").replace(\",\", \"\").replace(\" only\", \" rupees only\").strip() }}</td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Bank Details -->\r\n    <table>\r\n        <tr>\r\n            <td>\r\n                <strong>Bank Details:</strong><br>\r\n                <b>Bank Name:</b> ICICI Bank, \r\n                <b>Branch:</b> Trichy Road, Coimbatore,\r\n                <b>Account Number:</b> 001605021125, \r\n                <b>IFSC Code:</b> ICIC0000016\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Terms and Conditions -->\r\n    <table style=\" border-collapse: collapse; border-style: hidden !important; border-bottom: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <tr>\r\n            <td style=\"width: 70%; vertical-align: top;\">\r\n                <p style=\"font-size: 15px !important; font-weight: bold;\">Terms & Conditions:</p>\r\n                <ol style=\" font-size: 10px !important; margin-top: 5px; padding-left: 2px; list-style-position: inside;\">\r\n                    <li>NO CLAIMS ARE ENTERTAINED UNLESS BROUGHT TO OUR NOTICE WITHIN TWO DAYS ON RECEIPT OF GOODS.</li>\r\n                    <li>GOODS ONCE SOLD WILL NOT BE TAKEN BACK.</li>\r\n                    <li>INTEREST @ 24% WILL BE CHARGED ON OVERDUE PAYMENT.</li>\r\n                    <li>WE ARE NOT RESPONSIBLE FOR BREAKAGE & DAMAGE IN TRANSIT.</li>\r\n                    <li>TRANSIT INSURANCE IF ANY IS TO BE TAKEN BY THE BUYER.</li>\r\n                    <li>ANY DISPUTES ARISING ARE SUBJECT TO COIMBATORE JURISDICTION.</li>\r\n                </ol>\r\n            </td>\r\n            <td style=\"width: 30%; text-align: center;  font-size: 10px !important;\">\r\n                <p><strong>For SONALI WIRES LLP</strong></p><br><br><br><br><br><br><br><br><br>\r\n                <p><strong>Authorized Signatory</strong></p>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n\r\n<!-- PAGE BREAK -->\r\n<div class=\"page-break\"></div>\r\n\r\n<!-- THIRD COPY - DUPLICATE FOR SUPPLIER -->\r\n<div class=\"invoice-copy\">\r\n    \r\n    <table style=\"width: 100%; margin-bottom: 1px; border: hidden !important\">\r\n        <tr>\r\n            <td style=\"text-align: left; border: hidden !important\">\r\n                {% if doc.ewaybill %}\r\n                    <strong>E-Waybill:</strong> {{ doc.ewaybill }}\r\n                {% endif %}\r\n            </td>\r\n            <td style=\"text-align: right; border: hidden !important\">\r\n                <strong>Triplicate for Supplier</strong>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div class=\"copy-header\"></div>\r\n    <!-- Header Section -->\r\n    <table class=\"header-table\">\r\n        <tr>\r\n            <td style=\"width: 35%; line-height: 1.2;\">\r\n                <strong>Bill To:</strong><br>\r\n                <b>{{ doc.customer }}</b><br>\r\n                {% if doc.customer_address %}\r\n                    {% set billing_address = frappe.get_doc(\"Address\", doc.customer_address) %}\r\n                    {{ billing_address.address_line1 }}<br>\r\n                    {% if billing_address.address_line2 %}{{ billing_address.address_line2 }}<br>{% endif %}\r\n                    {{ billing_address.city }}, {{ billing_address.state }} - {{ billing_address.pincode }}<br>\r\n                    GSTIN: {{ billing_address.gstin if billing_address.gstin else 'N/A' }}\r\n                {% endif %}\r\n            </td>\r\n\r\n            <td style=\"width: 35%; line-height: 1.2;\">\r\n                {% set s_address = frappe.get_doc(\"Address\", doc.shipping_address_name) %}\r\n                <strong>Ship To:</strong><br>\r\n                {{ s_address.address_title }}<br>\r\n                {{ doc.shipping_address }}<br>\r\n                GSTIN: \r\n                {% set customer = frappe.get_doc(\"Customer\", doc.customer) %}\r\n                {{ customer.gstin if customer.gstin else 'N/A' }}\r\n            </td>\r\n\r\n            <td class=\"text-left\" style=\"width: 30%; line-height: 1.2;\">\r\n                <div class=\"invoice-title\">TAX INVOICE</div>\r\n                <strong>Invoice No:</strong> {{ doc.name }}<br>\r\n                <strong>Date:</strong> {{ frappe.utils.formatdate(doc.posting_date, \"dd-mm-yyyy\") }}<br>\r\n                <strong>Vehicle No:</strong> {{ doc.vehicle_no }}<br>\r\n                <strong>Carrier Name:</strong> {{ doc.custom_carrier_name }}<br>\r\n                <strong>Freight Term:</strong> {{ doc.custom_freight_term }}\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Item Table -->\r\n    {% set ns = namespace(total_weight=0, total_value=0) %}\r\n    <table class=\"items-table\" style=\" border-collapse: collapse; border-style: hidden !important; border-bottom: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <thead>\r\n            <tr>\r\n                <th style=\"text-align: center;\">S/N</th>\r\n                <th style=\"text-align: center;\">HSN</th>\r\n                <th style=\"text-align: center;\">Description of Goods</th>\r\n                <th style=\"text-align: center;\">Rate</th>\r\n                <th style=\"text-align: center;\">Qty</th>\r\n                <th style=\"text-align: center;\">Unit</th>\r\n                <th style=\"text-align: center;\">Disc(%)</th>\r\n                <th style=\"text-align: center;\">Unit Price</th>\r\n                <th style=\"text-align: center\">Amount</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {% for item in doc.items %}\r\n            <tr>\r\n                <td style=\"text-align: center;\">{{ loop.index }}</td>\r\n                <td style=\"text-align: center;\">{{ item.gst_hsn_code or \" \"}}</td>\r\n                <td style=\"text-align: center;\">{{ item.description }}</td>\r\n                <td style=\"text-align: center;\">{{ item.rate }}</td>\r\n                <td style=\"text-align: center;\">\r\n                    {% set weight = item.custom_weight_in_kg|float %}\r\n                    {% set length = item.custom_length_in_meter|float %}\r\n                    \r\n                    {% set uom = (frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") \r\n                                  or frappe.db.get_value(\"Item\", item.item_code, \"stock_uom\") \r\n                                  or \"N/A\")|upper %}\r\n                \r\n                    {% if uom == \"KG\" %}\r\n                        {% set value = weight %}\r\n                    {% elif uom in [\"METER\", \"MTR\", \"LENGTH\"] %}\r\n                        {% set value = length %}\r\n                    {% elif uom in [\"BOX\", \"BOXES\", \"COIL\", \"COILS\"] %}\r\n                        {% set value = item.qty %}\r\n                    {% else %}\r\n                        {% set value = 0 %}\r\n                    {% endif %}\r\n                \r\n                    {% if value == value|int %}\r\n                        {{ value|int }}\r\n                    {% else %}\r\n                        {{ \"%.3f\"|format(value) }}\r\n                    {% endif %}\r\n                </td>\r\n                \r\n                <td style=\"text-align: center;\">\r\n                    {% set sales_uom = frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") or item.uom %}\r\n                \r\n                    {% if sales_uom|lower == 'kg' %}\r\n                        Kg(s)\r\n                    {% elif sales_uom|lower == 'box' %}\r\n                        Box(s)\r\n                    {% elif sales_uom|lower == 'meter' %}\r\n                        Meter(s)\r\n                    {% else %}\r\n                        {{ sales_uom }}\r\n                    {% endif %}\r\n                </td>\r\n                <td style=\"text-align: center;\">0.00</td>\r\n                <td style=\"text-align: center;\">{{ item.rate }}</td>\r\n                <td class=\"text-right\" style='width:100px'>{{ \"%.2f\"|format(item.amount) }}</td>\r\n            </tr>\r\n            {% set ns.total_weight = ns.total_weight + (item.custom_weight_in_kg | float(0)) %}\r\n            {% set ns.total_value = ns.total_value + (item.amount | float(0)) %}\r\n            {% endfor %}\r\n    \r\n            <tr>\r\n                <td colspan=\"6\">E&OE.</td>\r\n                <td colspan=\"2\" class=\"text-right bold-text\">Total Amount:</td>\r\n                <td class=\"text-right\"><strong>\u20b9{{ '%.2f'|format(ns.total_value) }}</strong></td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <!-- Summary -->\r\n    <table style=\"border-style: hidden !important; border-left: 1px solid black !important; border-right: 1px solid black !important; border-collapse: collapse;\">\r\n        <tr>\r\n            <!-- Left Section (Invoice Details) -->\r\n            <td style=\"width: 50%; vertical-align: top; padding: 10px; border-right: 1px solid black;\">\r\n                {% if doc.irn %}\r\n                    {% set e_invoice_log = frappe.db.get_value(\"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True) %}\r\n                {% if e_invoice_log %}\r\n                    {% set invoice_data = json.loads(e_invoice_log.invoice_data) %}\r\n                    {% set date_format = frappe.db.get_single_value(\"System Settings\", 'date_format').replace(\"mm\", \"MM\") %}\r\n        \r\n                    <div style=\"padding-top: 5px; display: flex; align-items: center; justify-content: flex-start; margin-left: 8px;\">\r\n                        <!-- QR Code -->\r\n                        <div style=\"width: 120px; height: 120px; overflow: hidden; display: flex; align-items: center; justify-content: center;\">\r\n                            {{ web_block('e-Invoice QR', values={'e_invoice_qr_text': e_invoice_log.signed_qr_code }) }}\r\n                        </div>\r\n                        <!-- IRN Details -->\r\n                        <div style=\"max-width: 150px; word-wrap: break-word; font-size: 12px; margin-left: 15px;\">\r\n                            <p><b>IRN:</b> <span style=\"word-break: break-word;\">{{ doc.irn }}</span></p>\r\n                            <p><b>Ack No.:</b> {{ invoice_data.get(\"AckNo\") or '' }}</p>\r\n                            <p><b>Ack Date:</b> {{ frappe.utils.format_datetime(invoice_data.get(\"AckDt\"), date_format) if invoice_data.get(\"AckDt\") else '' }}</p>\r\n                        </div>\r\n                    </div>\r\n                {% endif %}\r\n            {% endif %}\r\n        </td>\r\n\r\n        <!-- Right Section (Tax & Totals) -->\r\n        <td style=\"width: 50%; vertical-align: top; padding: 0px !important;\">\r\n            {# Tax Calculations #}\r\n            \r\n            <!-- Debugging Output -->\r\n            {# Uncomment this to check values while debugging #}\r\n            {# {% for item in doc.items %} \r\n                {{ item.item_code }} - IGST Rate: {{ item.igst_rate }}, SGST Rate: {{ item.sgst_rate }}, CGST Rate: {{ item.cgst_rate }} <br> \r\n            {% endfor %} #}\r\n            <table style=\"width: 100%; border-style: hidden !important;\">\r\n                <tr>\r\n                    <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                        Amount Before Tax:\r\n                    </td>\r\n                    <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                        \u20b9{{ doc.total }}\r\n                    </td>\r\n                </tr>\r\n\r\n                {% for tax in doc.taxes %}\r\n                    {% if \"IGST\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"padding: 5px;\">IGST @ {{ tax.rate }}%:</td>\r\n                            <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                        </tr>\r\n                    {% elif \"CGST\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"padding: 5px;\">CGST @ {{ tax.rate }}%:</td>\r\n                            <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                        </tr>\r\n                    {% elif \"SGST\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"padding: 5px;\">SGST @ {{ tax.rate }}%:</td>\r\n                            <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                        </tr>\r\n                    {% endif %}\r\n                {% endfor %}\r\n\r\n                {% for tax in doc.taxes %}\r\n                    {% if \"TCS\" in tax.account_head %}\r\n                    <tr>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            TCS @ {{ tax.rate }}%:\r\n                        </td>\r\n                        <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            \u20b9{{ \"%.2f\"|format(tax.tax_amount) }}\r\n                        </td>\r\n                    </tr>\r\n                    {% endif %}\r\n                {% endfor %}\r\n                \r\n                {# Loop for Rounded Off - S #}\r\n                {% for tax in doc.taxes %}\r\n                    {% if \"Rounded Off - S\" in tax.account_head %}\r\n                    <tr>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            Round Off:\r\n                        </td>\r\n                        <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            \u20b9{{ \"%.2f\"|format(tax.tax_amount) }}\r\n                        </td>\r\n                    </tr>\r\n                    {% endif %}\r\n                {% endfor %}\r\n\r\n                <tr>\r\n                    <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                       Rounded Total:\r\n                    </td>\r\n                    <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                        \u20b9{{ \"%.2f\"|format(doc.outstanding_amount) }}\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </td>\r\n    </tr>\r\n</table>\r\n\r\n<!-- Amount in Words -->\r\n    <table style=\" border-collapse: collapse; border-style: hidden !important; border-top: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <tr>\r\n            <td><strong>IN WORDS: </strong> {{ doc.in_words.lower().replace(\"inr\", \"\").replace(\" and \", \" \").replace(\",\", \"\").replace(\" only\", \" rupees only\").strip() }}</td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Bank Details -->\r\n    <table>\r\n        <tr>\r\n            <td>\r\n                <strong>Bank Details:</strong><br>\r\n                <b>Bank Name:</b> ICICI Bank, \r\n                <b>Branch:</b> Trichy Road, Coimbatore,\r\n                <b>Account Number:</b> 001605021125, \r\n                <b>IFSC Code:</b> ICIC0000016\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Terms and Conditions -->\r\n    <table style=\" border-collapse: collapse; border-style: hidden !important; border-bottom: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <tr>\r\n        <td style=\"width: 70%; vertical-align: top;\">\r\n            <p style=\"font-size: 15px !important; font-weight: bold;\">Terms & Conditions:</p>\r\n            <ol style=\" font-size: 10px !important; margin-top: 5px; padding-left: 2px; list-style-position: inside;\">\r\n                <li>NO CLAIMS ARE ENTERTAINED UNLESS BROUGHT TO OUR NOTICE WITHIN TWO DAYS ON RECEIPT OF GOODS.</li>\r\n                <li>GOODS ONCE SOLD WILL NOT BE TAKEN BACK.</li>\r\n                <li>INTEREST @ 24% WILL BE CHARGED ON OVERDUE PAYMENT.</li>\r\n                <li>WE ARE NOT RESPONSIBLE FOR BREAKAGE & DAMAGE IN TRANSIT.</li>\r\n                <li>TRANSIT INSURANCE IF ANY IS TO BE TAKEN BY THE BUYER.</li>\r\n                <li>ANY DISPUTES ARISING ARE SUBJECT TO COIMBATORE JURISDICTION.</li>\r\n            </ol>\r\n        </td>\r\n        <td style=\"width: 30%; text-align: center;  font-size: 10px !important;\">\r\n            <p><strong>For SONALI WIRES LLP</strong></p><br><br><br><br><br><br><br><br><br>\r\n            <p><strong>Authorized Signatory</strong></p>\r\n        </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n\r\n<div class=\"page-break\"></div>\r\n<!-- FOURTH COPY - ORIGINAL FOR RECIPIENT -->\r\n<div class=\"invoice-copy\">\r\n    \r\n    <table style=\"width: 100%; margin-bottom: 1px; border: hidden !important\">\r\n        <tr>\r\n            <td style=\"text-align: left; border: hidden !important\">\r\n                {% if doc.ewaybill %}\r\n                    <strong>E-Waybill:</strong> {{ doc.ewaybill }}\r\n                {% endif %}\r\n            </td>\r\n            <td style=\"text-align: right; border: hidden !important\">\r\n                <strong>Extra Copy</strong>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    <div class=\"copy-header\"></div>\r\n    <!-- Header Section -->\r\n    <table class=\"header-table\">\r\n        <tr>\r\n            <td style=\"width: 35%; line-height: 1.2;\">\r\n                <strong>Bill To:</strong><br>\r\n                <b>{{ doc.customer }}</b><br>\r\n                {% if doc.customer_address %}\r\n                    {% set billing_address = frappe.get_doc(\"Address\", doc.customer_address) %}\r\n                    {{ billing_address.address_line1 }}<br>\r\n                    {% if billing_address.address_line2 %}{{ billing_address.address_line2 }}<br>{% endif %}\r\n                    {{ billing_address.city }}, {{ billing_address.state }} - {{ billing_address.pincode }}<br>\r\n                    GSTIN: {{ billing_address.gstin if billing_address.gstin else 'N/A' }}\r\n                {% endif %}\r\n            </td>\r\n\r\n            <td style=\"width: 35%; line-height: 1.2;\">\r\n                {% if doc.shipping_address_name %}\r\n                    {% set shipping_address = frappe.get_doc(\"Address\", doc.shipping_address_name) %}\r\n                    <strong>Ship To:</strong><br>\r\n                    <b>{{ shipping_address.address_title }}</b><br>\r\n                    {{ shipping_address.address_line1 }}<br>\r\n                    {% if shipping_address.address_line2 %}{{ shipping_address.address_line2 }}<br>{% endif %}\r\n                    {{ shipping_address.city }}, {{ shipping_address.state }} - {{ shipping_address.pincode }}<br>\r\n                    GSTIN: {{ shipping_address.gstin if shipping_address.gstin else 'N/A' }}\r\n                {% else %}\r\n                    <strong>Ship To:</strong><br>\r\n                    N/A\r\n                {% endif %}\r\n            </td>\r\n\r\n            <td class=\"text-left\" style=\"width: 30%; line-height: 1.2;\">\r\n                <div class=\"invoice-title\">TAX INVOICE</div>\r\n                <strong>Invoice No:</strong> {{ doc.name }}<br>\r\n                <strong>Date:</strong> {{ frappe.utils.formatdate(doc.posting_date, \"dd-mm-yyyy\") }}<br>\r\n                <strong>Vehicle No:</strong> {{ doc.vehicle_no }}<br>\r\n                <strong>Carrier Name:</strong> {{ doc.custom_carrier_name }}<br>\r\n                <strong>Freight Term:</strong> {{ doc.custom_freight_term }}\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Item Table -->\r\n    {% set ns = namespace(total_weight=0, total_value=0) %}\r\n    <table class=\"items-table\" style=\" border-collapse: collapse; border-style: hidden !important; border-bottom: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <thead>\r\n            <tr>\r\n                <th style=\"text-align: center;\">S/N</th>\r\n                <th style=\"text-align: center;\">HSN</th>\r\n                <th style=\"text-align: center;\">Description of Goods</th>\r\n                <th style=\"text-align: center;\">Rate</th>\r\n                <th style=\"text-align: center;\">Qty</th>\r\n                <th style=\"text-align: center;\">Unit</th>\r\n                <th style=\"text-align: center;\">Disc(%)</th>\r\n                <th style=\"text-align: center;\">Unit Price</th>\r\n                <th style=\"text-align: center\">Amount</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {% for item in doc.items %}\r\n            <tr>\r\n                <td style=\"text-align: center;\">{{ loop.index }}</td>\r\n                <td style=\"text-align: center;\">{{ item.gst_hsn_code or \" \"}}</td>\r\n                <td style=\"text-align: center;\">{{ item.description }}</td>\r\n                <td style=\"text-align: center;\">{{ item.rate }}</td>\r\n                <td style=\"text-align: center;\">\r\n                    {% set weight = item.custom_weight_in_kg|float %}\r\n                    {% set length = item.custom_length_in_meter|float %}\r\n                    \r\n                    {% set uom = (frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") \r\n                                  or frappe.db.get_value(\"Item\", item.item_code, \"stock_uom\") \r\n                                  or \"N/A\")|upper %}\r\n                \r\n                    {% if uom == \"KG\" %}\r\n                        {% set value = weight %}\r\n                    {% elif uom in [\"METER\", \"MTR\", \"LENGTH\"] %}\r\n                        {% set value = length %}\r\n                    {% elif uom in [\"BOX\", \"BOXES\", \"COIL\", \"COILS\"] %}\r\n                        {% set value = item.qty %}\r\n                    {% else %}\r\n                        {% set value = 0 %}\r\n                    {% endif %}\r\n                \r\n                    {% if value == value|int %}\r\n                        {{ value|int }}\r\n                    {% else %}\r\n                        {{ \"%.3f\"|format(value) }}\r\n                    {% endif %}\r\n                </td>\r\n                \r\n                <td style=\"text-align: center;\">\r\n                    {% set sales_uom = frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") or item.uom %}\r\n                \r\n                    {% if sales_uom|lower == 'kg' %}\r\n                        Kg(s)\r\n                    {% elif sales_uom|lower == 'box' %}\r\n                        Box(s)\r\n                    {% elif sales_uom|lower == 'meter' %}\r\n                        Meter(s)\r\n                    {% else %}\r\n                        {{ sales_uom }}\r\n                    {% endif %}\r\n                </td>\r\n                <td style=\"text-align: center;\">0.00</td>\r\n                <td style=\"text-align: center;\">{{ item.rate }}</td>\r\n                <td class=\"text-right\" style='width:100px'>{{ \"%.2f\"|format(item.amount) }}</td>\r\n            </tr>\r\n            {% set ns.total_weight = ns.total_weight + (item.custom_weight_in_kg | float(0)) %}\r\n            {% set ns.total_value = ns.total_value + (item.amount | float(0)) %}\r\n            {% endfor %}\r\n    \r\n            <tr>\r\n                <td colspan=\"6\">E&OE.</td>\r\n                <td colspan=\"2\" class=\"text-right bold-text\">Total Amount:</td>\r\n                <td class=\"text-right\"><strong>\u20b9{{ '%.2f'|format(ns.total_value) }}</strong></td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <!-- Summary -->\r\n    <table style=\"border-style: hidden !important; border-left: 1px solid black !important; border-right: 1px solid black !important; border-collapse: collapse;\">\r\n        <tr>\r\n            <!-- Left Section (Invoice Details) -->\r\n            <td style=\"width: 50%; vertical-align: top; padding: 10px; border-right: 1px solid black;\">\r\n                {% if doc.irn %}\r\n                    {% set e_invoice_log = frappe.db.get_value(\"e-Invoice Log\", doc.irn, (\"invoice_data\", \"signed_qr_code\"), as_dict=True) %}\r\n                    {% if e_invoice_log %}\r\n                        {% set invoice_data = json.loads(e_invoice_log.invoice_data) %}\r\n                        {% set date_format = frappe.db.get_single_value(\"System Settings\", 'date_format').replace(\"mm\", \"MM\") %}\r\n            \r\n                        <div style=\"padding-top: 5px; display: flex; align-items: center; justify-content: flex-start; margin-left: 8px;\">\r\n                            <!-- QR Code -->\r\n                            <div style=\"width: 120px; height: 120px; overflow: hidden; display: flex; align-items: center; justify-content: center;\">\r\n                                {{ web_block('e-Invoice QR', values={'e_invoice_qr_text': e_invoice_log.signed_qr_code }) }}\r\n                            </div>\r\n                            <!-- IRN Details -->\r\n                            <div style=\"max-width: 150px; word-wrap: break-word; font-size: 12px; margin-left: 15px;\">\r\n                                <p><b>IRN:</b> <span style=\"word-break: break-word;\">{{ doc.irn }}</span></p>\r\n                                <p><b>Ack No.:</b> {{ invoice_data.get(\"AckNo\") or '' }}</p>\r\n                                <p><b>Ack Date:</b> {{ frappe.utils.format_datetime(invoice_data.get(\"AckDt\"), date_format) if invoice_data.get(\"AckDt\") else '' }}</p>\r\n                            </div>\r\n                        </div>\r\n                    {% endif %}\r\n                {% endif %}\r\n            </td>\r\n\r\n            <!-- Right Section (Tax & Totals) -->\r\n            <td style=\"width: 50%; vertical-align: top; padding: 0px !important;\">\r\n                <table style=\"width: 100%; border-style: hidden !important;\">\r\n                    <tr>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            Amount Before Tax:\r\n                        </td>\r\n                        <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            \u20b9{{ doc.total }}\r\n                        </td>\r\n                    </tr>\r\n\r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"IGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">IGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% elif \"CGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">CGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% elif \"SGST\" in tax.account_head %}\r\n                            <tr>\r\n                                <td class=\"text-right bold-text\" style=\"padding: 5px;\">SGST @ {{ tax.rate }}%:</td>\r\n                                <td class=\"text-right\" style=\"padding: 5px;\">\u20b9{{ \"%.2f\"|format(tax.tax_amount) }}</td>\r\n                            </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n\r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"TCS\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                TCS @ {{ tax.rate }}%:\r\n                            </td>\r\n                            <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                \u20b9{{ \"%.2f\"|format(tax.tax_amount) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n                    \r\n                    {% for tax in doc.taxes %}\r\n                        {% if \"Rounded Off - S\" in tax.account_head %}\r\n                        <tr>\r\n                            <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                Round Off:\r\n                            </td>\r\n                            <td class=\"text-right\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                                \u20b9{{ \"%.2f\"|format(tax.tax_amount) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n\r\n                    <tr>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                           Rounded Total:\r\n                        </td>\r\n                        <td class=\"text-right bold-text\" style=\"border-bottom: 1px solid black; padding: 5px;\">\r\n                            \u20b9{{ \"%.2f\"|format(doc.outstanding_amount) }}\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    \r\n    <!-- Amount in Words -->\r\n    <table style=\" border-collapse: collapse; border-style: hidden !important; border-top: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <tr>\r\n            <td><strong>IN WORDS: </strong> {{ doc.in_words.lower().replace(\"inr\", \"\").replace(\" and \", \" \").replace(\",\", \"\").replace(\" only\", \" rupees only\").strip() }}</td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Bank Details -->\r\n    <table>\r\n        <tr>\r\n            <td>\r\n                <strong>Bank Details:</strong><br>\r\n                <b>Bank Name:</b> ICICI Bank, \r\n                <b>Branch:</b> Trichy Road, Coimbatore,\r\n                <b>Account Number:</b> 001605021125, \r\n                <b>IFSC Code:</b> ICIC0000016\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n    <!-- Terms and Conditions -->\r\n    <table style=\" border-collapse: collapse; border-style: hidden !important; border-bottom: 1px solid black !important; border-left: 1px solid black !important; border-right: 1px solid black !important;\">\r\n        <tr>\r\n            <td style=\"width: 70%; vertical-align: top;\">\r\n                <p style=\"font-size: 15px !important; font-weight: bold; margin-top: 5px; padding-left: 2px; list-style-position: inside;\">Terms & Conditions:</p>\r\n                <ol style=\" font-size: 10px !important;\">\r\n                    <li>NO CLAIMS ARE ENTERTAINED UNLESS BROUGHT TO OUR NOTICE WITHIN TWO DAYS ON RECEIPT OF GOODS.</li>\r\n                    <li>GOODS ONCE SOLD WILL NOT BE TAKEN BACK.</li>\r\n                    <li>INTEREST @ 24% WILL BE CHARGED ON OVERDUE PAYMENT.</li>\r\n                    <li>WE ARE NOT RESPONSIBLE FOR BREAKAGE & DAMAGE IN TRANSIT.</li>\r\n                    <li>TRANSIT INSURANCE IF ANY IS TO BE TAKEN BY THE BUYER.</li>\r\n                    <li>ANY DISPUTES ARISING ARE SUBJECT TO COIMBATORE JURISDICTION.</li>\r\n                </ol>\r\n            </td>\r\n            <td style=\"width: 30%; text-align: center;  font-size: 10px !important;\">\r\n                <p><strong>For SONALI WIRES LLP</strong></p><br><br><br><br><br><br><br><br><br>\r\n                <p><strong>Authorized Signatory</strong></p>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n\r\n</body>\r\n</html>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-07-07 19:34:28.703299",
 "modified_by": "Administrator",
 "module": "Sonali",
 "name": "Sale Invoice Format",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}