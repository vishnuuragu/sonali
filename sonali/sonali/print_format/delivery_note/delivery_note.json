{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-03-24 16:03:51.949647",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Delivery Note",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{% set company = frappe.get_doc(\"Company\", doc.company) %}\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <style>\r\n        body { font-family: Arial, sans-serif; }\r\n        .header { text-align: center; }\r\n        .header img { width: 300px;}\r\n        .company-details { text-align: center; font-size: 13px; margin-bottom: 10px; }\r\n        .title { font-size: 18px; font-weight: bold; text-align: center; margin-bottom: 2px; }\r\n        .table { width: 99.80%; border-collapse: collapse; margin-top: 2px; }\r\n        .table, .table th, .table td { border: 1px solid black; }\r\n        .table th, .table td { text-align: center; }\r\n        .subtotal { font-weight: bold; }\r\n        @media print {\r\n            body {\r\n                margin-top: 0;\r\n                padding-top: 0;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <img src=\"{{ company.default_letter_head or '/private/files/SW LLP.png' }}\" alt=\"Company Logo\">\r\n    </div>\r\n    <div class=\"company-details\">\r\n        {% if doc.company_address %}\r\n            {% set address = frappe.get_doc(\"Address\", doc.company_address) %}\r\n            <strong>{{ address.address_line1 }}, </strong>\r\n            {% if address.address_line2 %}\r\n                <strong>{{ address.address_line2 }}</strong><br>\r\n            {% endif %}\r\n            <strong>{{ address.city }}, {{ address.state }} - {{ address.pincode }} {{ address.country }}</strong><br>\r\n        {% endif %}\r\n\r\n        {% if doc.company %}\r\n            {% set company = frappe.get_doc(\"Company\", doc.company) %}\r\n            {% if company.gstin %}\r\n                <b>GSTIN:</b> {{ company.gstin }} |\r\n            {% endif %}\r\n            {% if company.pan %}\r\n                <b>PAN:</b> {{ company.pan }}<br>\r\n            {% endif %}\r\n            {% if company.phone_no %}\r\n                <b>Contact:</b> {{ company.phone_no }} |\r\n            {% endif %}\r\n            {% if company.email %}\r\n                <b></b> {{ company.email }} |\r\n            {% endif %}\r\n            {% if company.website %}\r\n                <b></b><a href=\"{{ company.website }}\" target=\"_blank\">{{ company.website }}</a>\r\n            {% endif %}\r\n        {% endif %}\r\n    </div>\r\n\r\n    <div class=\"title\" style=\"border: 1px solid #000\">Packing Slip</div>\r\n\r\n    <table width=\"100%\">\r\n        <tr>\r\n            <td><strong>Invoice No:</strong> {{ doc.name }}</td>\r\n            <td><strong>PO No:</strong> {{ doc.po_no or \"N/A\" }}</td>\r\n        </tr>\r\n        <tr>\r\n            <td><strong>Vehicle No:</strong> {{ doc.vehicle_no or \"N/A\" }}</td>\r\n            <td><strong>Date:</strong> {{ doc.posting_date }}</td>\r\n        </tr>\r\n    </table>\r\n\r\n    {% set grouped_items = {} %}\r\n\r\n    {% for item in doc.items %}\r\n        {% set length = frappe.db.get_value(\"Serial No\", item.serial_no, \"custom_length\") or item.custom_length or 0 %}\r\n        {% set weight = item.custom_weight or 0 %}\r\n        {% set box_serial = item.serial_no or \"N/A\" %}\r\n        {% set item_group = item.item_code %}\r\n\r\n        {# Get UOM from Item master #}\r\n    {% set uom = frappe.db.get_value(\"Item\", item.item_code, \"sales_uom\") %}\r\n    {% if not uom %}\r\n        {% set uom = frappe.db.get_value(\"Item\", item.item_code, \"stock_uom\") or \"N/A\" %}\r\n    {% endif %}\r\n\r\n\r\n        {# Decide value based on UOM #}\r\n        {% if uom == \"KG\" %}\r\n            {% set value = weight %}\r\n        {% elif uom in [\"Meter\", \"Mtr\", \"Length\"] %}\r\n            {% set value = length %}\r\n        {% elif uom in [\"Box\", \"Boxes\", \"Coil\", \"Coils\"] %}\r\n            {% set value = frappe.db.get_value(\"Delivery Note Item\", {\"parent\": doc.name, \"item_code\": item.item_code}, \"qty\") or 0 %}\r\n        {% else %}\r\n            {% set value = 0 %}\r\n        {% endif %}\r\n\r\n        {# Initialize group if not already exists #}\r\n        {% if item_group not in grouped_items %}\r\n            {% set _ = grouped_items.update({ item_group: [] }) %}\r\n        {% endif %}\r\n\r\n        {% set _ = grouped_items[item_group].append({\r\n            \"item_code\": item.item_code,\r\n            \"size\": frappe.db.get_value(\"Item\", item.item_code, \"custom_size_mm\") or \"-\",\r\n            \"box_serial\": box_serial,\r\n            \"uom\": uom,\r\n            \"value\": value\r\n        }) %}\r\n    {% endfor %}\r\n\r\n    <table class=\"table\">\r\n        <thead>\r\n            <tr>\r\n                <th>#</th>\r\n                <th>Product Name</th>\r\n                <th>Size</th>\r\n                <th>Box Serial No</th>\r\n                <th>UOM</th>\r\n                <th>Values</th>\r\n            </tr>\r\n        </thead>\r\n        {% set ns = namespace(row_index=0, subtotal=0) %}\r\n        <tbody>\r\n            {% for group, items in grouped_items.items() %}\r\n                {% set ns.subtotal = 0 %}\r\n                {% for item in items %}\r\n                    {% set ns.row_index = ns.row_index + 1 %}\r\n                    {% set ns.subtotal = ns.subtotal + item.value %}\r\n                    <tr>\r\n                        <td>{{ ns.row_index }}</td>\r\n                        <td>{{ item.item_code }}</td>\r\n                        <td>{{ item.size }}</td>\r\n                        <td>{{ item.box_serial }}</td>\r\n                        <td>{{ item.uom }}</td>\r\n                        <td>{{ \"%.3f\"|format(item.value) }}</td>\r\n                    </tr>\r\n                {% endfor %}\r\n                <tr class=\"subtotal\">\r\n                    <td colspan=\"5\" style=\"text-align: right;\">Total</td>\r\n                    <td>{{ \"%.3f\"|format(ns.subtotal) }}</td>\r\n                </tr>\r\n            {% endfor %}\r\n        </tbody>\r\n    </table>\r\n</body>\r\n</html>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-07-07 11:13:08.360519",
 "modified_by": "Administrator",
 "module": "Sonali",
 "name": "Delivery Note",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}